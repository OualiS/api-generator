{"version":3,"file":"index.js","sources":["../dist-src/is-authorization-route.js","../dist-src/is-sms-triggering-route.js","../dist-src/request-with-2fa.js","../dist-src/get-token.js","../dist-src/auth.js","../dist-src/hook.js","../dist-src/version.js","../dist-src/index.js"],"sourcesContent":["const PATHS = [\n    \"/authorizations\",\n    \"/authorizations/clients/:client_id\",\n    \"/authorizations/clients/:client_id/:fingerprint\",\n    \"/authorizations/:authorization_id\",\n];\n// CREDIT: Simon Grondin (https://github.com/SGrondin)\n// https://github.com/octokit/plugin-throttling.js/blob/45c5d7f13b8af448a9dbca468d9c9150a73b3948/lib/route-matcher.js\nfunction routeMatcher(paths) {\n    // EXAMPLE. For the following paths:\n    /* [\n        \"/orgs/:org/invitations\",\n        \"/repos/:owner/:repo/collaborators/:username\"\n    ] */\n    const regexes = paths.map((p) => p\n        .split(\"/\")\n        .map((c) => (c.startsWith(\":\") ? \"(?:.+?)\" : c))\n        .join(\"/\"));\n    // 'regexes' would contain:\n    /* [\n        '/orgs/(?:.+?)/invitations',\n        '/repos/(?:.+?)/(?:.+?)/collaborators/(?:.+?)'\n    ] */\n    const regex = `^(?:${regexes.map((r) => `(?:${r})`).join(\"|\")})[^/]*$`;\n    // 'regex' would contain:\n    /*\n      ^(?:(?:\\/orgs\\/(?:.+?)\\/invitations)|(?:\\/repos\\/(?:.+?)\\/(?:.+?)\\/collaborators\\/(?:.+?)))[^\\/]*$\n  \n      It may look scary, but paste it into https://www.debuggex.com/\n      and it will make a lot more sense!\n    */\n    return new RegExp(regex, \"i\");\n}\nconst REGEX = routeMatcher(PATHS);\nexport function isAuthorizationRoute(url) {\n    return !!url && REGEX.test(url);\n}\n","import { isAuthorizationRoute } from \"./is-authorization-route\";\nexport function isSmsTriggeringRoute(options) {\n    return ([\"PATCH\", \"PUT\", \"POST\"].includes(options.method) &&\n        isAuthorizationRoute(options.url));\n}\n","import { RequestError } from \"@octokit/request-error\";\nimport { isSmsTriggeringRoute } from \"./is-sms-triggering-route\";\nexport async function requestWith2Fa(state, options, customRequest) {\n    const request = customRequest || state.request;\n    try {\n        if (state.totp) {\n            options = Object.assign({}, options, {\n                headers: Object.assign({}, options.headers, {\n                    \"x-github-otp\": state.totp,\n                }),\n            });\n        }\n        const response = await request(options);\n        return response;\n    }\n    catch (error) {\n        if (!error.headers)\n            throw error;\n        const totpRequired = /required/.test(error.headers[\"x-github-otp\"] || \"\");\n        const hasSmsDelivery = /sms/.test(error.headers[\"x-github-otp\"] || \"\");\n        // handle \"2FA required\" error only\n        if (error.status !== 401 || !totpRequired) {\n            throw error;\n        }\n        if (error.status === 401 &&\n            totpRequired &&\n            error.request.headers[\"x-github-otp\"]) {\n            if (state.totp) {\n                // TOTP is no longer valid, request again\n                delete state.totp;\n            }\n            else {\n                throw new RequestError(\"Invalid TOTP (time-based one-time password) for two-factor authentication\", 401, {\n                    headers: error.headers,\n                    request: error.request,\n                });\n            }\n        }\n        // If user has 2Fa with SMS configured, send a bogus \"PATCH /authorizations\"\n        // request to trigger the TOTP delivery via SMS, unless the current request\n        // already triggered a delivery\n        if (hasSmsDelivery && !isSmsTriggeringRoute(options)) {\n            try {\n                await request(\"PATCH /authorizations\", {\n                    headers: options.headers,\n                });\n            }\n            catch (error) {\n                // we expect a 401\n                if (error.status !== 401)\n                    throw error;\n            }\n        }\n        // we set state.totp after the request to make sure that it's valid\n        const totp = await state.strategyOptions.on2Fa();\n        try {\n            const response = await requestWith2Fa(state, Object.assign({}, options, {\n                headers: Object.assign({}, options.headers, {\n                    \"x-github-otp\": totp,\n                }),\n            }), customRequest);\n            state.totp = totp;\n            return response;\n        }\n        catch (error) {\n            // error without a headers property is an unexpected error\n            // which we donâ€™t cover with tests\n            /* istanbul ignore next */\n            if (!error.headers)\n                throw error;\n            const totpRequired = /required/.test(error.headers[\"x-github-otp\"] || \"\");\n            // unless the error is an invalid TOTP, we can cache it\n            if (!totpRequired) {\n                state.totp = totp;\n            }\n            throw error;\n        }\n    }\n}\n","import btoa from \"btoa-lite\";\nimport { requestWith2Fa } from \"./request-with-2fa\";\nexport async function getToken(state, authOptions, request) {\n    if (state.token && !authOptions.refresh) {\n        return state.token;\n    }\n    const basicAuthorization = `basic ${btoa(`${state.strategyOptions.username}:${state.strategyOptions.password}`)}`;\n    const timestamp = new Date().toISOString().substr(0, 10);\n    const fingerprintDefault = state.strategyOptions.token.note\n        ? undefined\n        : Math.random().toString(36).substr(2);\n    const fingerprint = state.strategyOptions.token.fingerprint || fingerprintDefault;\n    const note = state.strategyOptions.token.note || `octokit ${timestamp} ${fingerprint}`;\n    const scopes = state.strategyOptions.token.scopes || [];\n    const noteUrl = state.strategyOptions.token.noteUrl ||\n        \"https://github.com/octokit/auth-basic.js#readme\";\n    const options = Object.assign({\n        method: \"POST\",\n        url: \"/authorizations\",\n        headers: {\n            authorization: basicAuthorization,\n        },\n        note,\n        note_url: noteUrl,\n        scopes,\n    }, fingerprint ? { fingerprint } : null, state.strategyOptions.token.clientId\n        ? {\n            client_id: state.strategyOptions.token.clientId,\n            client_secret: state.strategyOptions.token.clientSecret,\n        }\n        : null);\n    const { data: { id, token }, } = await requestWith2Fa(state, options, request);\n    state.token = {\n        type: \"token\",\n        tokenType: \"oauth\",\n        id,\n        token,\n        username: state.strategyOptions.username,\n    };\n    return state.token;\n}\n","import btoa from \"btoa-lite\";\nimport { getToken } from \"./get-token\";\nimport { requestWith2Fa } from \"./request-with-2fa\";\nexport async function auth(state, options = {}) {\n    const credentials = btoa(`${state.strategyOptions.username}:${state.strategyOptions.password}`);\n    if (options.type === \"basic\") {\n        // send a dummy request to invoke 2Fa authorization. The endpoint does not exist\n        // yet triggers 2Fa for both app & sms, see https://git.io/fjPJM\n        try {\n            await requestWith2Fa(state, {\n                method: \"PATCH\",\n                url: \"/authorizations\",\n                headers: {\n                    authorization: `basic ${credentials}`,\n                },\n            });\n        }\n        catch (error) {\n            if (error.status !== 404) {\n                throw error;\n            }\n            // we are expecting a 404 error\n        }\n        return Object.assign({\n            type: \"basic\",\n            username: state.strategyOptions.username,\n            password: state.strategyOptions.password,\n            credentials,\n        }, state.totp ? { totp: state.totp } : null);\n    }\n    return getToken(state, options);\n}\n","import btoa from \"btoa-lite\";\nimport { isAuthorizationRoute } from \"./is-authorization-route\";\nimport { getToken } from \"./get-token\";\nimport { requestWith2Fa } from \"./request-with-2fa\";\nexport async function hook(state, request, route, parameters) {\n    const endpoint = request.endpoint.merge(route, parameters);\n    const basicAuthorization = `basic ${btoa(`${state.strategyOptions.username}:${state.strategyOptions.password}`)}`;\n    if (isAuthorizationRoute(endpoint.url)) {\n        endpoint.headers.authorization = basicAuthorization;\n        return requestWith2Fa(state, endpoint, request);\n    }\n    const { token } = await getToken(state, {}, request);\n    endpoint.headers.authorization = `token ${token}`;\n    return request(endpoint);\n}\n","export const VERSION = \"1.4.8\";\n","import { getUserAgent } from \"universal-user-agent\";\nimport { request } from \"@octokit/request\";\nimport { auth } from \"./auth\";\nimport { hook } from \"./hook\";\nimport { VERSION } from \"./version\";\nexport const createBasicAuth = function createBasicAuth(options) {\n    console.warn(`[@octokit/auth-basic] Basic authentication has been deprecated. See https://github.com/octokit/auth-basic.js/#deprecation`);\n    [\"username\", \"password\", \"on2Fa\"].forEach((option) => {\n        if (!options.hasOwnProperty(option)) {\n            throw new Error(`[@octokit/auth-basic] ${option} option is required`);\n        }\n    });\n    const strategyOptions = Object.assign({\n        token: {},\n    }, options);\n    const state = {\n        strategyOptions,\n        request: strategyOptions.request ||\n            request.defaults({\n                baseUrl: \"https://api.github.com\",\n                headers: {\n                    \"user-agent\": `octokit-auth-basic.js/${VERSION} ${getUserAgent()}`,\n                },\n            }),\n    };\n    return Object.assign(auth.bind(null, state), {\n        hook: hook.bind(null, state),\n    });\n};\n"],"names":["PATHS","routeMatcher","paths","regexes","map","p","split","c","startsWith","join","regex","r","RegExp","REGEX","isAuthorizationRoute","url","test","isSmsTriggeringRoute","options","includes","method","requestWith2Fa","state","customRequest","request","totp","Object","assign","headers","response","error","totpRequired","hasSmsDelivery","status","RequestError","strategyOptions","on2Fa","getToken","authOptions","token","refresh","basicAuthorization","btoa","username","password","timestamp","Date","toISOString","substr","fingerprintDefault","note","undefined","Math","random","toString","fingerprint","scopes","noteUrl","authorization","note_url","clientId","client_id","client_secret","clientSecret","data","id","type","tokenType","auth","credentials","hook","route","parameters","endpoint","merge","VERSION","createBasicAuth","console","warn","forEach","option","hasOwnProperty","Error","defaults","baseUrl","getUserAgent","bind"],"mappings":"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"}